jammod v1.0 README
==================

$Id$


What is jammod?
---------------

jammod is a program which loads a Linux kernel module without support
from the kernel. It does not appear in the module list (lsmod,
/proc/modules). To accomplish this, jammod writes the module file
directly into kernel memory (/dev/kmem) and links it. As you might
imagine, fiddling with kernel memory is not very nice - don't use
jammod on boxes you don't want to see crashing now and then.

The idea of inserting kernel code via /dev/kmem is not new - the root
kit SucKIT has been doing this for some time. A detailed description
of this method was published in Phrack 58 in December 2001. The whole
point of jammod is that you can load any (ABI compatible) module into
the kernel. Also, SucKIT does not relocate symbols. In contrast,
jammod needs a valid System.map file (I will work on other solutions).

jammod is currently only implemented for i386 Linux. It has been
tested on Debian Sarge running on a Linux 2.6.0 kernel.


Installation
------------

Run "make" to compile. You need the following stuff for that:
- GNU make
- gcc (I used 3.3.3)
- Linux kernel headers (2.6.0 here)

Install the resulting binary "./src/jammod" on your system, e.g. in
/usr/local/sbin.


Using jammod
------------

On the target host, you need:
- Linux kernel 2.4.10 or later
- System.map
- a kernel module which is ABI compatible to the running kernel
- the jammod binary

The "ABI compatible" should be the hardest part here - the Linux
kernel hackers change the ABI more often than their underwear. If you
always compile your module including kernel headers of the same kernel
version with a similar configuration, chances are very good that the
binary is compatible.

I have not implemented support for kernels older than 2.4.10 - anybody
really interested?

XXX: to be written


Why?
----

Because I Can (TM)

This is a proof-of-concept software to demonstrate that disabling
module support in the kernel does not really improve
security. Removing /dev/kmem support from the kernel does. No idea why
there is this /dev/kmem feature, who ever needed this except SucKIT?

This is a tool, and it is available to everyone, if you like it or
not. If I hadn't written it, someone else would do it. Tools are not
bad; the hacker who rooted your server and used it to cover his tracks
might be called "bad". Damnit, now you wish you had applied all those
security upgrades.

If you want to protect your machines from others exploiting your
kernel using jammod, SucKIT or similar software, disable /dev/kmem and
/dev/mem in your kernel. You have to patch linux/drivers/char/mem.c to
do that. IMHO, /dev/kmem etc. should be disabled by default.


Links
-----

jammod homepage
  http://readme.gzipped.org/jammod/

"Linux on-the-fly kernel patching without LKM"
  https://www.phrack.com/show.php?p=58&a=7

SucKIT download site
  http://hysteria.sk/sd/f/suckit/


Greetings
---------

Greetings to my friend MocI with whom I sat in a bar in Cologne
drinking cocktails, while I had the idea to write this program.


The usual legal blah blah
-------------------------

Copyright 2003-2004 Max Kellermann (max@linuxtag.org), except code
which was copied from SucKIT and Linux.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; version 2 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
